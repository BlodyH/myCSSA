{% extends 'myCSSAhub/component/_layout.html' %}

{% block pageTitle %}
商家信息
{% endblock %}

{% block ExtraHeader %}
<!-- bootstrap 4.x is supported. You can also use the bootstrap css 3.3.x versions -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
<!-- if using RTL (Right-To-Left) orientation, load the RTL CSS file after fileinput.css by uncommenting below -->
<!-- link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/css/fileinput-rtl.min.css" media="all" rel="stylesheet" type="text/css" /-->
<!-- the font awesome icon library if using with `fas` theme (or Bootstrap 4.x). Note that default icons used in the plugin are glyphicons that are bundled only with Bootstrap 3.x. -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<!-- piexif.min.js is needed for auto orienting image files OR when restoring exif data in resized images and when you
    wish to resize images before upload. This must be loaded before fileinput.min.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/js/plugins/piexif.min.js" type="text/javascript"></script>
<!-- sortable.min.js is only needed if you wish to sort / rearrange files in initial preview. 
    This must be loaded before fileinput.min.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/js/plugins/sortable.min.js" type="text/javascript"></script>
<!-- purify.min.js is only needed if you wish to purify HTML content in your preview for 
    HTML files. This must be loaded before fileinput.min.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/js/plugins/purify.min.js" type="text/javascript"></script>
<!-- bootstrap.min.js below is needed if you wish to zoom and preview file content in a detail modal
    dialog. bootstrap 4.x is supported. You can also use the bootstrap js 3.3.x versions. -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<!-- the main fileinput plugin file -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/js/fileinput.min.js"></script>
<!-- following theme script is needed to use the Font Awesome 5.x theme (`fas`) -->
< script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/themes/fas/theme.min.js"></script -->
<!-- optionally if you need translation for your language then include the locale file as mentioned below (replace LANG.js with your language locale) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.5.1/js/locales/LANG.js"></script>
{% endblock ExtraHeader %}


{% block pageContent %}

<form action="" method="post" id="form">
    {% for error in form.non_field_errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
    {% endfor %}

    {% if back_end_flag %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
        <strong>消息发送成功</strong>
        <div id="countdown" style="float:right;">3s后自动跳转</div>
        <button class="close" type="button" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">×</span>
        </button>
    </div>

    <script type="text/javascript">

        var count = 3;
        //写一个方法，显示倒数秒数  数到0后跳转页面  
        function countDown() {
            //将count显示在div中
            document.getElementById("countdown").innerHTML = count+'s后自动跳转';
            //没执行一次，count减1
            count -= 1;
            //count=0时，跳转页面
            if (count == 0) {
                location.href = '{% url 'myCSSAhub:notifications_list'%}';
                //window.location.href="index.html";
            }
            //每秒执行一次,showTime()
            setTimeout("countDown()", 1000);
        }
        //执行countDown方法
        countDown();
        // setTimeout("window.location = '{% url 'myCSSAhub:notifications_list'%}'", 1000);
    </script>
    {% endif %}

    {% csrf_token %}
    <div class="form-group">
        <label for="notification_user">商户名：</label>
        <input class="form-control" id="" name="name" style="width:100%" required></select>
    </div>

    <div class="form-group">
        <label for="notification_title">地址：</label>
        <input class="form-control" id="notification_title" name="address" type="text" required/>
        <label for="notification_title">联系电话：</label>
        <input class="form-control" id="notification_title" name="phone" type="text" required/>
        <label for="notification_title">商家网站：</label>
        <input class="form-control" id="notification_title" name="link" type="text" required/>
        <div class="form-group">
            <label for="notification_content">商家简介：</label>
            <textarea class="form-control" id="notification_content" name="description" rows="11" required></textarea>
        </div>
        <div class="form-group">
            <label for="exampleFormControlFile1">选择附件</label>
            <input type="file" class="form-control-file" id="exampleFormControlFile1">
        </div>
    </div>
    <!-- 直接点击submit可以发送ID至后台，select2控件已经封装好了 -->
    <button class="btn btn-primary" type="submit">发送</button>
    <button class="btn btn-danger" type="reset">删除</button>

</form>

{% endblock%}
