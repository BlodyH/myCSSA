{% extends 'myCSSAhub/component/_layout.html' %}
{% load static %}
{% block ExtraHeader %}
<link href="{% static '/myCSSAhub/vendors/DataTables/datatables.min.css'%}" rel="stylesheet">
{% endblock ExtraHeader %}

{% block pageContent %}
<div class="col-md-12">
  <div class="card" >
    <div class="card-header">
      <i class="fa fa-align-justify"></i> 账户流水
    </div>
    <div class="card-body">
        <table id="main-datatable" class="table table-responsive-md"  style="width:100%" >
        <thead>
          <tr>
            <th>流水单号</th>
            <th>时间</th>
            <th>交易类型</th>
            <th>关联用户</th>
            <th>收入/支出</th>
            <th>金额</th>
            <th>交易状态</th>
          </tr>
        </thead>
        </table>
    </div>
  </div>
</div>
{% endblock %}

{% block ExtraJS %}

<script src="{% static '/myCSSAhub/vendors/DataTables/datatables.js'%}"></script>
<script>
$(document).ready(function() {
    var oTable = $('#main-datatable').dataTable({
        "responsive": true,
        "processing": true,
        "serverSide": true,
        "ajax": "{% url 'myCSSAhub:FinanceAPI:transaction_json' %}",
        "rowCallback": function( row, data, index ) {
              if ( data[4] == "支出" )
              {
                  $(row).find('td:eq(4)').css('background-color', 'rgb(237, 171, 168)');
              }
              else
              {
                  $(row).find('td:eq(4)').css('background-color', 'rgb(193, 237, 168)');
              }
          }
    });
});
</script>

{% endblock ExtraJS %}
